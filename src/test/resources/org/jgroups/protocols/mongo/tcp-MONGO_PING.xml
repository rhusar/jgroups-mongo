<!--
  Formatted copy of the original jgroups-5.5.0.Final.jar!/tcp.xml reconfigured to use mongo.MONGO_PING.
-->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="urn:org:jgroups"
        xsi:schemaLocation="urn:org:jgroups http://www.jgroups.org/schema/jgroups-5.5.xsd">
    <include file="${transport-config:tcp-default.xml}"/>
    <!-- Uncomment attributes 'insert_sp' and 'call_insert_sp' if you want to use stored procedures -->
    <!-- Disable shutdown hook in tests to prevent hang:
         The shutdown hook tries to clean up MongoDB data during JVM shutdown,
         but by that point the Testcontainers MongoDB instance is already stopped,
         causing Surefire to hang and eventually kill the forked JVM. -->
    <mongo.MONGO_PING connection_url="${jgroups.mongo.connection_url:mongodb://localhost:27017/test}"
                      remove_all_data_on_view_change="true"
                      register_shutdown_hook="false"
                      return_entire_cache="false"
    />
    <MERGE3 min_interval="10s"
            max_interval="30s"/>
    <FD_SOCK2/>
    <FD_ALL3 timeout="40s"
             interval="5s"/>
    <VERIFY_SUSPECT2 timeout="1.5s"/>
    <BARRIER/>
    <pbcast.NAKACK2 use_mcast_xmit="false"/>
    <UNICAST3/>
    <pbcast.STABLE desired_avg_gossip="50s"
                   max_bytes="4M"/>
    <pbcast.GMS print_local_addr="true"
                join_timeout="2s"/>
    <MFC max_credits="10M"
         min_threshold="0.4"/>
    <UFC max_credits="10M"
         min_threshold="0.4"/>
    <FRAG2 frag_size="60K"/>
    <pbcast.STATE_TRANSFER/>
</config>